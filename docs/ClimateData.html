<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2022-11-28" />

<title>Climate class activity</title>

<script src="site_libs/header-attrs-2.13/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Environmental Science</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Syllabus
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data science
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Week 1</li>
    <li>
      <a href="Rintro.html">The R and RStudio environments</a>
    </li>
    <li class="dropdown-header">Class activities</li>
    <li>
      <a href="ClimateData.html">Climate data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Climate science
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Week 1</li>
    <li>
      <a href="AQintro.html">Air Quality Lab Introduction</a>
    </li>
    <li class="dropdown-header">Week 2</li>
    <li>
      <a href="AQexp1.html">Air Quality: Test transects</a>
    </li>
    <li class="dropdown-header">Week 3</li>
    <li>
      <a href="AQexp2.html">Air Quality: Analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Soil science
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="soil.html">Analyzing data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Bioacoustics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Sound.html">Bioacoustic data</a>
    </li>
    <li>
      <a href="bioaco.html">Analyzing sound data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Climate class activity</h1>
<h4 class="author"></h4>
<h4 class="date">2022-11-28</h4>

</div>


<div id="evaluating-the-signs-of-climate-change" class="section level1">
<h1>Evaluating the signs of climate change</h1>
<p>We are going to encounter some methods for interacting with, visualizing, and analyzing earth sciences data in this activity. At each table, one student will pick one of the datasets and run the code associated with that dataset. What do you see? Based on the course materials, how does this constitute evidence for global climate change?</p>
<p>Please start by logging into <a href="https://sso.rstudio.cloud/pomona">sso.rstudio.cloud/pomona</a>. Once you’ve logged in, you should see the option to open the <code>EA 30.1 - Fall 2022</code> workspace. You can also access <a href="https://sso.rstudio.cloud/pomona?redirect=https%3A%2F%2Frstudio.cloud%2Fspaces%2F272090%2Fjoin%3Faccess_code%3DRH6FObo67WiGmhjuBirlncXZZYKYQBZW9K1HPSEV">the <code>EA 30.1 - Fall 2022</code> workspace at this link</a>.</p>
<p>At the workspace, you should then see the “Assignment” <code>ClimateData</code>. Please click on that Assignment. Here is a <a href="https://rstudio.cloud/spaces/272090/content/4437518">direct link to the <code>ClimateData</code> project</a>, but it may not work if this is the first time in a while that you’re logging into RStudio.Cloud. If it doesn’t work, no worries - just log in through the <a href="https://sso.rstudio.cloud/pomona">sso.rstudio.cloud/pomona</a> link.</p>
<p>First, we will all load these packages - make sure you run this code irrespective of whichever variable you select.</p>
<pre class="r"><code>library(dplyr)
library(openxlsx)
library(ggplot2)

sheet_url &lt;- &quot;https://github.com/EA30POM/Fall2021/blob/main/data/ClimateChangeSigns.xlsx?raw=true&quot; # location of the Excel spreadsheet

keelingCO2 &lt;- openxlsx::read.xlsx(sheet_url,sheet=&quot;Keeling&quot;) # everyone needs to download the Keeling CO2 data because we will be combining that with the other variables too.</code></pre>
<p>Visualization can help you get a feel for your data, and can be a very useful aid in exploring data. We will use the <code>ggplot2</code> package to create plots in <code>R</code>.</p>
<p><code>ggplot2</code> creates plots based on different layers. The three necessary components are:</p>
<ul>
<li>the dataset with the data to be plotted</li>
<li>the “aesthetics”, which map how the data will be associated with different plotting elements, such as the location of points in a scatterplot, or other features such as shape, size, color, transparency, etc.</li>
<li>the geometric elements in the plot (points, boxplot, histogram)</li>
</ul>
<p>While there are additional layering components that one can include, we will confine our attention to these three layers. For more information, please consult the <a href="https://ggplot2-book.org/">free, online ggplot2 Book</a>.</p>
<p>Scatterplots are most useful for visualizing two continuous, numeric variables. In defining a plot using <code>ggplot2</code>, we specify the data source (in the <code>ggplot</code> function), and the mapping of the variables (<code>aes</code>, short for aesthetic, within <code>ggplot</code>). Subsequently, we specify the type of <code>geom</code> (geometry) we want in the plot.</p>
<p>Below, we will follow a convention where we assign an object (<code>p</code>) to store the plot. We specify what layers we want to add to the object <code>p</code> by using the <code>+</code> sign.</p>
<div id="variable-1-global-co_2-concentration-in-the-atmosphere" class="section level2">
<h2>Variable 1: Global <span class="math inline">\(CO_2\)</span> concentration in the atmosphere</h2>
<p>The data source for this variable is <a href="https://climate.nasa.gov/vital-signs/carbon-dioxide/">NASA’s Global Climate Change Vital Signs of the Planet Program</a>.</p>
<pre class="r"><code>p &lt;- ggplot(keelingCO2, aes(x=year,y=meanCO2ppm)) # initiate the plot
p &lt;- p + geom_point() # add scatterplot points
p &lt;- p + geom_line() # add a trend line
p &lt;- p + labs(x=&quot;Year&quot;,y=&quot;CO2 (ppm)&quot;) # change axis labels
p &lt;- p + theme_classic() # change plot style
p

CO2mod &lt;- lm(meanCO2ppm~year, data=keelingCO2) # we are running a &quot;linear regression&quot; statistical model. You can think of this like finding the line that fits our data the best.
summary(CO2mod) # what do you see in the Coefficients: table for year?</code></pre>
</div>
<div id="variable-2-arctic-sea-ice-minimum-spatial-extent" class="section level2">
<h2>Variable 2: Arctic sea ice minimum spatial extent</h2>
<p>The <a href="https://climate.nasa.gov/vital-signs/arctic-sea-ice/">data source is here</a>.</p>
<pre class="r"><code>seaIce &lt;- openxlsx::read.xlsx(sheet_url,&quot;SeaIce&quot;)
seaIceCO2 &lt;- left_join(seaIce, keelingCO2, by=c(&quot;year&quot;=&quot;year&quot;)) # we are joining up the sea ice extent data with global CO2 level data, matching on each year

p &lt;- ggplot(seaIceCO2, aes(x=meanCO2ppm, y=extent))
p &lt;- p + geom_point()
p &lt;- p + geom_line()
p &lt;- p + labs(x=&quot;CO2 (ppm)&quot;,y=&quot;Minimum sea ice extent (million km2)&quot;)
p &lt;- p + theme_classic()
p # what do we see?

seaIceMod &lt;- lm(extent ~ meanCO2ppm, data=seaIceCO2) # we are running a &quot;linear regression&quot; statistical model. You can think of this like finding the line that fits our data the best.
summary(seaIceMod) # what do you see in the Coefficients: table for mean CO2 (ppm)? </code></pre>
</div>
<div id="variable-3-global-surface-temperature-land-and-ocean" class="section level2">
<h2>Variable 3: Global surface temperature (land and ocean)</h2>
<p>The <a href="https://climate.nasa.gov/vital-signs/global-temperature/">data source is here</a>.</p>
<pre class="r"><code>globTemp &lt;- openxlsx::read.xlsx(sheet_url,&quot;GlobTemp&quot;)
globTempCO2 &lt;- left_join(globTemp, keelingCO2, by=c(&quot;Year&quot;=&quot;year&quot;)) # we are joining up global temperature data with global CO2 level data, matching on each year

p &lt;- ggplot(globTempCO2, aes(x=meanCO2ppm, y=TempObs))
p &lt;- p + geom_point()
p &lt;- p + geom_line()
p &lt;- p + labs(x=&quot;CO2 (ppm)&quot;,y=&quot;Global temperature anomaly (*C)&quot;)
p &lt;- p + theme_classic()
p # what do we see?

tempMod &lt;- lm(TempObs ~ meanCO2ppm, data=globTempCO2) # we are running a &quot;linear regression&quot; statistical model. You can think of this like finding the line that fits our data the best.
summary(tempMod) # what do you see in the Coefficients: table for mean CO2 (ppm)? </code></pre>
</div>
<div id="variable-4-heat-content-of-the-oceans" class="section level2">
<h2>Variable 4: Heat content of the oceans</h2>
<p>The <a href="https://climate.nasa.gov/vital-signs/ocean-heat/">original data source is here</a> but the data I used came from the <a href="https://www.epa.gov/climate-indicators/climate-change-indicators-ocean-heat">EPA</a>. The ocean’s heat content is expressed in <em>zettajoules</em> or <span class="math inline">\(10^{22}\)</span> joules. In contrast, total global energy consumption is around 580 million terajoules, or 5.8 zettajoules.</p>
<pre class="r"><code>oceanHeat &lt;- openxlsx::read.xlsx(sheet_url,&quot;OceanHeat&quot;)
oceanHeatCO2 &lt;- left_join(oceanHeat, keelingCO2, by=c(&quot;Year&quot;=&quot;year&quot;)) # we are joining up global ocean heat content data with global CO2 level data, matching on each year

p &lt;- ggplot(oceanHeatCO2, aes(x=meanCO2ppm, y=NOAASea))
p &lt;- p + geom_point()
p &lt;- p + geom_line()
p &lt;- p + labs(x=&quot;CO2 (ppm)&quot;,y=&quot;Ocean heat content (ZJ)&quot;)
p &lt;- p + theme_classic()
p # what do we see?

oceanMod &lt;- lm(NOAASea ~ meanCO2ppm, data=oceanHeatCO2) # we are running a &quot;linear regression&quot; statistical model. You can think of this like finding the line that fits our data the best.
summary(oceanMod) # what do you see in the Coefficients: table for mean CO2 (ppm)? </code></pre>
</div>
<div id="taking-the-activity-further" class="section level2">
<h2>Taking the activity further</h2>
<p>Time permitting, consider the following:</p>
<ul>
<li>for the <code>lm</code> coefficient outputs, what do those numbers represent? What do they tell us about the impact on some response variable for changes in <span class="math inline">\(CO_2\)</span>?
<ul>
<li>what is the unit of change in <span class="math inline">\(CO_2\)</span> for the coefficients?</li>
<li>how much would your variable change if <span class="math inline">\(CO_2\)</span> went up by 10 ppm?</li>
<li>can we reasonably extrapolate those estimated valus into the future?</li>
</ul></li>
<li>how would you modify the code above to re-run the analyses with <code>Year</code> as the explanatory/predictive/x-axis variable?</li>
</ul>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
